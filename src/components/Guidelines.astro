---
import fetchApi from '../lib/payload';
import type Guideline from '../interfaces/wcag';
import Criteria from './Criteria.astro';

const guidelines = await fetchApi<Guideline[]>({
  endpoint: 'guidelines',
  wrappedByKey: 'docs',
  global: false,
  lang: Astro.props.lang
});

const filterdedGuidelines = guidelines.filter((guideline: Guideline) => guideline.Principle.principleNumber === Astro.props.principleNumber);
---

<section>
  {filterdedGuidelines.map((guideline) => {
    return (
      <div>
        <h2>{ guideline.guidelineNumber } { guideline.title }</h2>
        <div class="text-xl bodytext mb-8">Tähän sivun content</div>
        <Criteria principleNumber={ Astro.props.principleNumber } guidelineNumber={ guideline.guidelineNumber } />
      </div>
    );
  })}
</section>
